<div id='map'></div>

<script>
function initMap(){
  var test ={lat: <%= @maps.latitude %>, lng: <%= @maps.longitude %>};
    var map = new google.maps.Map(document.getElementById('map'), {
              zoom: 15, 
              center: {lat: 35.6758907, lng: 139.7448603},
              });
    var transitLayer = new google.maps.TransitLayer();
    transitLayer.setMap(map);

    var contentString = '住所：<%= @maps.address %>';
    var infowindow = new google.maps.InfoWindow({
      content: contentString
    });

// Map上の指定した位置にピンを挿して表示する
    var marker = new google.maps.Marker({
                  position:test,
                  map: map,
                  title: contentString
                 });

     marker.addListener('click', function() {
       infowindow.open(map, marker);
     });
  }
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<%="#{ENV["API_KEY"]}"%>&callback=initMap" async defer></script>